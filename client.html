<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Change App</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: flex-start;  /* Align content to the left */
      align-items: flex-start;  /* Align content to the top */
      height: 100vh;
    }

    .SongParts {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 10px;
      border: 1px solid #ccc; /* Thinner border with solid style */
      padding: 10px;
      position: relative; /* Required for pseudo-element */
      margin-top: 5px;  /* Move the container 10 pixels lower */
      margin-left: 5px;
    }

    

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class="SongParts">
  <button id="verseButton">Verse</button>
  <button id="preChorusButton">Pre-Chorus</button>
  <button id="chorusButton">Chorus</button>
  <button id="tagButton">Tag</button>
  <button id="bridgeButton">Bridge</button>
  <button id="fillButton">Fill</button>
</div>
<script src="/node_modules/socket.io/client-dist/socket.io.js"></script>
<script>
  const socket = io(); // Connect to the server

  // Create separate objects for button states, including Fill
  const buttons = {
    verse: {
      button: document.getElementById('verseButton'),
      currentColor: 'none',
    },
    preChorus: {
      button: document.getElementById('preChorusButton'),
      currentColor: 'none',
    },
    chorus: {
      button: document.getElementById('chorusButton'),
      currentColor: 'none',
    },
    tag: {
      button: document.getElementById('tagButton'),
      currentColor: 'none',
    },
    bridge: {
      button: document.getElementById('bridgeButton'),
      currentColor: 'none',
    },
    fill: {  // Added Fill button object
      button: document.getElementById('fillButton'),
      currentColor: 'none',
    },
  };

  function changeColor(buttonObject) {
    switch (buttonObject.currentColor) {
      case 'none':
        buttonObject.currentColor = 'green';
        buttonObject.button.style.backgroundColor = 'green';
        break;
      case 'green':
        buttonObject.currentColor = 'red';
        buttonObject.button.style.backgroundColor = 'red';
        break;
      default:
        buttonObject.currentColor = 'none';
        buttonObject.button.style.backgroundColor = ''; // Reset background color for "none"
        break;
    }
    socket.emit('colorChange', { button: buttonObject.button.id, color: buttonObject.currentColor }); // Emit event with button ID and color
  }

  for (const buttonName in buttons) {  // Add event listener for all buttons, including Fill
    buttons[buttonName].button.addEventListener('click', () => {
      changeColor(buttons[buttonName]);
    });
  }

  socket.on('colorChange', (data) => {
    if (data.button !== event.target.id) { // Check if received data matches current button
      const targetButton = document.getElementById(data.button);
      targetButton.style.backgroundColor = data.color === 'none' ? '' : data.color;
      buttons[data.button].currentColor = data.color; // Update all button objects for consistency
    }
  });

</script>
</body>
</html>
